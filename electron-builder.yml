appId: com.anava.infrastructure-deployer
productName: Anava Installer
directories:
  output: release
afterSign: scripts/notarize.js
files:
  - dist/**/*
  - node_modules/**/*
  - !node_modules/**/test/**
  - !node_modules/**/*.md
  - !node_modules/**/*.map
  - !**/*.ts
  - !**/tsconfig.json
extraResources:
  - from: terraform
    to: terraform
    filter:
      - "**/*"
  - from: node_modules/puppeteer/.local-chromium
    to: puppeteer-chromium
    filter:
      - "**/*"
    optional: true
  - from: resources/vc_redist.x64.exe
    to: resources/vc_redist.x64.exe
    optional: true
asarUnpack:
  - node_modules/ping/**/*
  - node_modules/puppeteer/**/*
  - node_modules/puppeteer-core/**/*
  - node_modules/@puppeteer/**/*
  - node_modules/puppeteer/.local-chromium/**/*
  - node_modules/puppeteer/.cache/**/*
  - node_modules/chromium/**/*
  - terraform/**/*
mac:
  category: public.app-category.developer-tools
  icon: assets/icon.icns
  hardenedRuntime: true
  gatekeeperAssess: false
  entitlements: assets/entitlements.mac.plist
  entitlementsInherit: assets/entitlements.mac.plist
  notarize:
    teamId: 3JVZNWGRYT
win:
  icon: assets/icon.ico
  target:
    - target: nsis
      arch:
        - x64
  artifactName: ${productName}-Setup-${version}.${ext}
  requestedExecutionLevel: requireAdministrator
  publisherName: Anava AI Inc.
  legalTrademarks: Â© 2025 Anava AI Inc.
  signDlls: true
  rfc3161TimeStampServer: http://timestamp.digicert.com
  timeStampServer: http://timestamp.digicert.com
nsis:
  oneClick: false
  perMachine: false  # User installation to avoid UAC issues
  allowToChangeInstallationDirectory: true
  allowElevation: true
  createDesktopShortcut: true
  createStartMenuShortcut: true
  shortcutName: Anava Installer
  menuCategory: Anava AI
  installerIcon: assets/icon.ico
  uninstallerIcon: assets/icon.ico
  deleteAppDataOnUninstall: false
  unicode: true
  warningsAsErrors: false
  license: LICENSE.md
  include: installer-scripts/installer-safe.nsh
  guid: 6B3E5A7C-9D4F-4E2A-8C1B-F9E8D3A2C5B7  # Fixed GUID
  runAfterFinish: false
  uninstallDisplayName: Anava Installer ${version}
  
linux:
  icon: assets/icon.png
  target:
    - AppImage
    - deb
  category: Development